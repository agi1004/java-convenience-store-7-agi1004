# java-convenience-store-precourse

## 전체 흐름
프로그램의 전체 흐름을 담당하는 Controller 클래스는 상품을 보여주고, 고객으로부터 주문을 받아 처리한 후 영수증을 출력하는 기능을 담당합니다. 또한, 쇼핑을 계속할지 묻는 과정을 반복하는 역할을 합니다. 주요 기능은 다음과 같습니다:

### 주요 기능
상품 목록 출력: 상점에서 판매하는 모든 상품의 정보를 화면에 출력합니다. 고객이 상품을 보고 구매할 수 있도록 돕는 기능입니다.

주문 생성: 고객이 구매하려는 상품을 선택하면, 주문 정보를 생성하여 저장합니다. 주문 생성 시 잘못된 입력이 들어오면 에러 메시지를 표시하고, 올바른 입력을 받을 때까지 반복해서 요청합니다.

구매 처리: 고객이 멤버십 할인을 받을지 선택한 후, 최종 금액을 계산하여 구매를 완료합니다. 구매가 완료된 후에는 재고를 업데이트하고, 주문 정보를 갱신합니다.

영수증 출력: 최종 구매 내역과 금액 정보를 기반으로 영수증을 생성하여 출력합니다. 이 과정에서 고객이 지불해야 할 최종 금액을 정확히 알 수 있습니다.

쇼핑 계속 여부 확인: 고객에게 쇼핑을 계속할지 묻고, 이를 통해 반복적으로 쇼핑을 진행할 수 있도록 지원합니다.

이 Controller 클래스는 이러한 기능들을 통합적으로 관리하여 상점 애플리케이션이 정상적으로 동작하도록 하는 중심적인 역할을 합니다. 각 서비스(ProductService, OrderService, AmountService)와 뷰(InputView, OutputView)를 사용하여 상품 관리, 주문 처리, 금액 계산, 입력/출력 등의 주요 기능을 담당하고 있습니다.

## 프로모션 적용 조건별 사례
### 사례 1: 구매 개수가 프로모션 개수보다 많은 경우
- 상황:
  - 프로모션 재고: 7개
  - 구매 수량: 10개
  - 만들 수 있는 세트 수: 프로모션 재고(7) / 프로모션 세트(3) = 2세트
  - 프로모션 적용 가능한 수량: 2세트 * 3 = 6개
  - 프로모션 미적용 수량: 구매 수량(10) - 프로모션 적용 수량(6) = 4개
- 사용자 메시지:
  - 메시지: "현재 {상품명} 4개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)"
    - Y 입력 시: 전체 구매 수량(10개)을 구매 품목에 추가
    - N 입력 시: 프로모션 적용 가능한 수량(6개)만 구매 품목에 추가
  - 증정품 추가: 프로모션 세트 수(2세트)만큼 증정품에 추가
 

### 사례 2: 구매 개수가 프로모션 개수 이하인 경우
- 상황: 구매 수량이 프로모션 적용 가능한 세트보다 적어 부족한 수량을 무료로 받을 수 있는 경우가 발생할 수 있음.
1. 구매 수량이 프로모션 세트 이상일 경우:
  - 예시) 구매 수량이 5개일 때, 프로모션 세트로는 1세트를 만들 수 있어 3개가 프로모션 적용 가능.
  - 부족한 개수 계산: 프로모션 세트(3) - 구매 수량(5 % 3) = 1개 부족.
  - 메시지: "현재 {상품명}은 부족한 개수 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)"
    - Y 입력 시: 구매 품목에 전체 구매 수량(5개)와 부족한 개수(1개)를 추가하고, 증정품에 세트 수(1세트) + 부족한 개수(1개) 추가.
    - N 입력 시: 기존 구매 수량(5개)만 구매 품목에 추가하고, 증정품에 세트 수(1세트) 추가.
2. 구매 수량이 프로모션 세트보다 적을 경우:
  - 예시) 구매 수량이 2개일 때, 프로모션 세트는 3개 필요하여 1개가 부족.
  - 메시지: "현재 {상품명}은 부족한 개수 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)"
    - Y 입력 시: 구매 품목에 구매 수량(2개) + 부족한 개수(1개) 추가하고, 증정품에 부족한 개수(1개) 추가.
    - N 입력 시: 기존 구매 수량(2개)만 구매 품목에 추가.

### 공통 질문: 멤버십 할인 여부
- 모든 구매 과정 후 마지막 단계에서 사용자가 멤버십 할인을 받을지 여부를 물어봄.

## 예외 상황
- 구매할 상품명과 수량을 입력받기
  - IllegalArgumentException 발생 
    - 구매할 상품과 수량 형식이 올바르지 않은 경우
      - [ERROR] 올바르지 않은 형식으로 입력했습니다. 다시 입력해 주세요.
    - 존재하지 않는 상품을 입력한 경우
      - [ERROR] 존재하지 않는 상품입니다. 다시 입력해 주세요.
    - 구매 수량이 재고 수량을 초과한 경우
      - [ERROR] 재고 수량을 초과하여 구매할 수 없습니다. 다시 입력해 주세요.
    - 재고가 소진된 경우
      - [ERROR] 재고가 모두 소진되었습니다. 다시 입력해 주세요.
    - 기타 잘못된 입력의 경우
      - [ERROR] 잘못된 입력입니다. 다시 입력해 주세요.

